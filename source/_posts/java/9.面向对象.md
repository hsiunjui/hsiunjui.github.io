---
title: 面向对象
date: 2020-03-24 21:27:13
tags: Java SE
categories: Java
---
>类、对象;

<!--more-->
# 类
类是一个模板,描述一类对象的行为和状态.它是一个抽象概念.
- 属性表述静态特征
- 方法描述其行为 
```java
public class ClassName {
  public ClassName() { // 构造器
    // 一个类中可以有多个构造器,根据参数不同
    // 构造器可以调用setter方法来赋值
  }
  String name; // 属性(成员),声明的时候会给默认的初始值 null
  private static sAttr; // 静态成员(类成员),所有对象共享
  public void sayHello(){} // 方法
  public static void sayHi() {
    // 静态方法(静态成员/方法可以通过类名/对象名.xxx访问)
    // static不能修饰class
    // static也不能修饰局部变量
    // 静态方法中不能使用this
  } 
}
```
## 内部类
- 成员内部类(普通内部类)
  * 无法直接实例化(借助外部类(类名、对象名、对象方法获取))
  * 访问修饰符同成员属性/方法
  * 可以直接访问外部成员(同名则优先访问内部的,如要访问外部：类名.this.属性名)
  * 外部类无法直接访问内部类信息,需要通过内部类实列
- 静态内部类
  * 只能直接访问外部类的静态成员/方法,如果访问非静态需要用外部类实例
- 方法内部类(局部内部类)
  * 只再方法内部有效
- 匿名内部类
  * new 抽象类() {具体方法实现}
类的设计尽量遵循单一职责原则,就是一个类尽量简单.以解耦

# 对象
对象是类的一个实例,有状态和行为,是一个具体的存在.
```java
ClassName cn = new ClassName();
cn.name;
cn.sayHello();
```

# 包
- 打包用package xxx; 一般是域名倒置+模块+功能
- 引入包用import xxx;(当从不同引入同名类时,在实例化时要用包名全路径)

# 代码块
- 构造代码块,在类中定义(会先于构造器执行,static的会最早)
- 普通代码块,在方法中定义

# 面向对象的特性
## 封装
通过访问控制符隐藏对象信息,留出访问接口(getter/setter方法)。
|  修饰符   | 当前类 | 同一包内 | 子孙类(同包) | 子孙类(不同包) | 其他包             |
|  ----     | ----   | ----    | ----         | ----           | ----               |
| public    | 是     | 是      | 是           | 是             | 是                 |  
| protected | 是     | 是      | 是           | 是(限内部)     | 否                 |
| default   | 是     | 是      | 是           | 否             | 否                 |
| private   | 是     | 否      | 否           | 否             | 否                 |
- protected跨包时,子类内部可以访问


## 继承
- Java中是单继承
- 子类继承父类采用extends关键字
- 子类不能选择性继承，也不允许继承父类的构造方法
- 子类可以重写父类的方法(返回值(兼容类型)/方法名/参数完全一致,访问修饰符必须大于等于父类方法)
- 在子类中可以使用super关键字指定父类(子类默认调用无参构造)
- 父类不能访问子类成员及方法
- Object类是所有类的根类(常重写equals/toString方法)
- 用final修饰的类不能被继承,final修饰的方法不能被重写,final修饰的变量不能被修改
  

## 多态
- 满足继承关系
- 父类引用指向子类对象
  ```java
  // 可以调用子类重写父类的方法和继承的方法
  // 不可调用子类特有的方法
  // 此时,父类的静态方法无法被重写!!!
  Animal animal = new Cat(); // 向上转型(隐式、自动)
  // 可以调用自身的方法了(子类引用指向父类实例，需要满足条件)
  if(animal installOf Cat) { // instanceOf 可以向上兼容(直到Object)
    Cat cat = (Cat)animal; // 向下转(强制)
  }
  ```

  #### 抽象类
  - 通过abstract修饰
  - 不能被实例化
  - 抽象方法没有方法体,且必须被实现(可以没有抽象方法)

  #### 接口
  - interface关键在修饰,实现用implements关键字
  - 接口默认访问修饰符时public
  - 方法都是抽象方法(abstract可以省略),访问符默认是public
  - 接口方法必需被全部实现(除非实现它的是一个抽象类)
  - 可以包含常量(public static final都可省略)
  - 一个类可以实现多个接口
  - 接口可以被继承(接口继承接口,可以继承多个)
  - jdk1.8 可以有default+方法体, static+方法体



  



